; --------------------------------------------------------------------------
; 名称: 把整个屏幕设置成青色
; 说明: 将调色板填充为青色并调用 SB-DOS 菜单/返回
; 作者: Lion
; 邮箱: chengbin@3578.cn
; 日期: 2025-09-23
; 备注: 适配 SB2000 平台，遵循 cc65 语法与 sb2k.cfg 向量布局
; --------------------------------------------------------------------------
.segment "CODE"
; SB-DOS 可启动标识（若需要引导扇区格式，必须紧跟在跳转指令后）
	JMP START
	.byte $AA, $55, $00, $00, $00

; 常量
COLOR	= $31	; 青色 调色板索引（$31）

START:
	; 将整个调色板区填充为 COLOR
	LDA #COLOR
	LDX #$40	; 填充 64 个条目
	LDY #$00
FillPal:
	STA $2040, Y
	INY
	DEX
	BNE FillPal

	; 恢复/返回调用环境（可选：写入 SB-DOS 状态）
	LDA #$6D
	STA $063E
	LDA #$0A
	STA $063F
	JSR $FFF0	; 跳到 SB2K BIOS 菜单/返回
	RTS

; --------------------------------------------------------------------------
; 中断/复位向量区（适配 sb2k.cfg）
; --------------------------------------------------------------------------
.segment "VECTORS"
	.word 0	; NMI
	.word START	; RESET
	.word 0	; IRQ